<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Análisis de Partidos</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>

<style>
:root{
  --bg:#0f172a;
  --card:#020617;
  --text:#e5e7eb;
  --muted:#94a3b8;
  --border:#1e293b;
  --accent:#22c55e;
  --danger:#ef4444;
}

*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui;
}

.container{
  max-width:1100px;
  margin:auto;
  padding:16px;
}

.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:12px;
  padding:16px;
  margin-bottom:16px;
}

input,button{
  background:#020617;
  color:var(--text);
  border:1px solid var(--border);
  border-radius:8px;
  padding:8px;
  width:100%;
}

button{
  background:var(--accent);
  color:#022c22;
  font-weight:600;
  cursor:pointer;
}

.grid{
  display:grid;
  gap:8px;
  grid-template-columns:repeat(auto-fit,minmax(120px,1fr));
}

.table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}

.table th,.table td{
  border:1px solid var(--border);
  padding:6px;
  text-align:center;
}

.table th{
  background:#020617;
  color:var(--muted);
}

.small{
  font-size:12px;
  color:var(--muted);
}

@media(max-width:600px){
  .table{font-size:11px}
}
</style>
</head>

<body>
<div class="container">

<div class="card">
<h2>Partido (A - B)</h2>
<div class="grid">
<input id="teamA" placeholder="Equipo A">
<input id="teamB" placeholder="Equipo B">
</div>
</div>

<div class="card">
<h3>Agregar Encuentro</h3>
<div class="grid">
<input id="competencia" placeholder="Competencia">
<input id="ttA" placeholder="Tiros Totales A">
<input id="ttB" placeholder="Tiros Totales B">
<input id="tapA" placeholder="Tiros a Puerta A">
<input id="tapB" placeholder="Tiros a Puerta B">
<input id="corA" placeholder="Corners A">
<input id="corB" placeholder="Corners B">
<input id="tarA" placeholder="Tarjetas A">
<input id="tarB" placeholder="Tarjetas B">
<input id="golA" placeholder="Goles A">
<input id="golB" placeholder="Goles B">
</div>
<br>
<button onclick="addMatch()">AÑADIR ENCUENTRO</button>
</div>

<div class="card">
<h3>Historial</h3>
<table class="table" id="tabla">
<thead>
<tr>
<th>Competencia</th>
<th>Tiros Tot</th>
<th>A Puerta</th>
<th>Corners</th>
<th>Tarjetas</th>
<th>Goles</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr><th>TOTAL</th><th id="t1"></th><th id="t2"></th><th id="t3"></th><th id="t4"></th><th id="t5"></th></tr>
<tr><th>Promedio</th><th id="p1"></th><th id="p2"></th><th id="p3"></th><th id="p4"></th><th id="p5"></th></tr>
<tr><th>Probabilidad</th><th id="pr1"></th><th id="pr2"></th><th id="pr3"></th><th id="pr4"></th><th id="pr5"></th></tr>
</tfoot>
</table>
</div>

</div>

<script>
const firebaseConfig={
  apiKey:"TU_API_KEY",
  authDomain:"TU_PROYECTO.firebaseapp.com",
  projectId:"TU_PROYECTO"
};

firebase.initializeApp(firebaseConfig);
const db=firebase.firestore();
const ref=db.collection("analisis");

let data=[];

function addMatch(){
  const m={
    competencia:competencia.value,
    tt:+ttA.value + +ttB.value,
    tap:+tapA.value + +tapB.value,
    cor:+corA.value + +corB.value,
    tar:+tarA.value + +tarB.value,
    gol:+golA.value + +golB.value
  };
  ref.add(m);
}

ref.onSnapshot(s=>{
  data=[];
  s.forEach(d=>data.push(d.data()));
  render();
});

function render(){
  const tb=document.querySelector("#tabla tbody");
  tb.innerHTML="";
  let t=[0,0,0,0,0];
  data.forEach(m=>{
    tb.innerHTML+=`
    <tr>
      <td>${m.competencia}</td>
      <td>${m.tt}</td>
      <td>${m.tap}</td>
      <td>${m.cor}</td>
      <td>${m.tar}</td>
      <td>${m.gol}</td>
    </tr>`;
    t[0]+=m.tt;t[1]+=m.tap;t[2]+=m.cor;t[3]+=m.tar;t[4]+=m.gol;
  });
  ["t1","t2","t3","t4","t5"].forEach((id,i)=>document.getElementById(id).textContent=t[i]);
  ["p1","p2","p3","p4","p5"].forEach((id,i)=>document.getElementById(id).textContent=(t[i]/data.length||0).toFixed(1));
  ["pr1","pr2","pr3","pr4","pr5"].forEach((id,i)=>document.getElementById(id).textContent=((t[i]/(t.reduce((a,b)=>a+b,0)||1))*100).toFixed(1)+"%");
}
</script>
</body>
</html>
